import{_ as $,r as m,o as v,c as g,a as e,b as k,d as b,w as I,e as f,v as T,T as J,F as B,p as M,f as C,g as G,t as H,h as V,i as U,j as R,k as O,l as q,m as D,n as F,q as A,u as z,s as W,x as K,y as j,z as Q,A as N,B as P,C as Y,D as Z}from"./index-21d61ff4.js";const ee=t=>(M("data-v-66fdef17"),t=t(),C(),t),te={class:"header"},se={class:"resume"},oe={class:"movements"},ne=ee(()=>e("div",{class:"grip"},null,-1)),ae=[ne],le={class:"body"},ce={__name:"Layout",setup(t){const n=m(!1);return(a,s)=>(v(),g(B,null,[e("div",te,[k(a.$slots,"header",{},void 0,!0)]),e("div",se,[k(a.$slots,"resume",{},void 0,!0)]),e("div",oe,[e("div",{class:"head",onClick:s[0]||(s[0]=o=>n.value=!n.value)},ae),b(J,{name:"fade"},{default:I(()=>[f(e("div",le,[k(a.$slots,"movements",{},void 0,!0)],512),[[T,n.value]])]),_:3})])],64))}},ue=$(ce,[["__scopeId","data-v-66fdef17"]]);const X=t=>(M("data-v-6d9267f7"),t=t(),C(),t),re=X(()=>e("path",{d:"M16 12.005a4 4 0 1 1-4 4 4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6 6 6 0 0 0-6-6zM5.394 6.813l1.414-1.415 3.506 3.506L8.9 10.318zM2 15.005h5v2H2zm3.394 10.192L8.9 21.691l1.414 1.415-3.506 3.505zM15 25.005h2v5h-2zm6.687-1.899 1.414-1.415 3.506 3.506-1.414 1.414zM25 15.005h5v2h-5zm-3.313-6.101 3.506-3.506 1.414 1.415-3.506 3.505zM15 2.005h2v5h-2z",fill:"currentColor"},null,-1)),ie=[re],_e=X(()=>e("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194 11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016 13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555 1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38 1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1)),de=[_e],ve={__name:"ToggleTheme",setup(t){const n=m(window.matchMedia("(prefers-color-scheme: dark)").matches);return G(n,async a=>{a?H.setDarkTheme():H.setLightTheme()}),(a,s)=>(v(),g("div",null,[f((v(),g("svg",{onClick:s[0]||(s[0]=o=>n.value=!n.value),xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 32 32",class:"block h-full"},ie,512)),[[T,n.value]]),f((v(),g("svg",{onClick:s[1]||(s[1]=o=>n.value=!n.value),xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 32 32",class:"block h-full"},de,512)),[[T,!n.value]])]))}},me=$(ve,[["__scopeId","data-v-6d9267f7"]]);const pe=t=>(M("data-v-ab209eea"),t=t(),C(),t),he=["src"],ge=pe(()=>e("h3",null,[e("span",null,"Pretty "),q("Cash")],-1)),fe={__name:"Header",setup(t){const n=s=>new URL(Object.assign({"/src/assets/close-icon.svg":V,"/src/assets/logo.svg":U,"/src/assets/scripts/theme.js":R,"/src/assets/trash-icon.svg":O})[`/src/assets/${s}`],self.location).href,a=()=>{window.location.reload()};return(s,o)=>(v(),g("header",null,[e("img",{onClick:a,src:n("logo.svg"),alt:"Logo"},null,8,he),ge,b(me)]))}},ye=$(fe,[["__scopeId","data-v-ab209eea"]]);const $e=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}),be={props:{totalLabel:{type:String},label:{type:String,default:null},totalAmount:{type:Number},amount:{type:Number,default:null}},computed:{labelVisual(){return this.label!==null?this.label:this.totalLabel},amountVisual(){return this.amount!==null?this.amount:this.totalAmount},amountCurrency(){return $e.format(this.amountVisual)}}},we={class:"graphic"},xe={class:"action"};function Ie(t,n,a,s,o,u){return v(),g("main",null,[e("p",null,D(u.labelVisual),1),e("h1",null,D(u.amountCurrency),1),e("div",we,[k(t.$slots,"graphic",{},void 0,!0)]),e("div",xe,[k(t.$slots,"action",{},void 0,!0)])])}const Me=$(be,[["render",Ie],["__scopeId","data-v-51b7fb60"]]);const Ce=t=>(M("data-v-bfe92a2c"),t=t(),C(),t),Se=["viewBox"],ke=["y1","y2"],Te=["points"],Ae=["x1","x2","y2"],Le=Ce(()=>e("p",null,"Last 30 days",-1)),De={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(t,{emit:n}){const a=t,{amounts:s}=F(a),o=m(300),u=m(250),_=m(!1),p=m(0),y=({target:d,touches:i})=>{_.value=!0;const S=d.getBoundingClientRect().width,w=d.getBoundingClientRect().x,x=i[0].clientX;p.value=(x-w)*o.value/S},c=()=>{_.value=!1,n("select",null)},l=d=>{const i=Math.min(...s.value),S=Math.max(...s.value),w=Math.abs(S)+Math.abs(i),x=d+Math.abs(i);return u.value-x*u.value/w},r=A(()=>l(0)),h=A(()=>{const d=s.value.length;return s.value.reduce((i,S,w)=>{const x=o.value/d*(w+1),E=l(S);return`${i} ${x},${E}`},`0,${l(s.value.length?s.value[0]:0)}`)});return G(p,d=>{const i=Math.ceil(d/(o.value/s.value.length));i<0||i>s.value.length||n("select",s.value[i-1])}),(d,i)=>f((v(),g("div",null,[(v(),g("svg",{onTouchstart:y,onTouchmove:y,onTouchend:c,viewBox:`0 0  ${o.value} ${u.value}`},[e("line",{stroke:"gray","stroke-width":"2",x1:"0",y1:r.value,x2:"300",y2:r.value},null,8,ke),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:h.value},null,8,Te),f(e("line",{stroke:"#04b500","stroke-width":"2",x1:p.value,y1:"0",x2:p.value,y2:u.value},null,8,Ae),[[T,_.value]])],40,Se)),Le],512)),[[T,!!z(s).length]])}},ze=$(De,[["__scopeId","data-v-bfe92a2c"]]);const Ne={class:"movement"},Be={class:"content"},Ve={class:"action"},Ue=["src"],Re={__name:"Movement",props:{id:{type:Number},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(t,{emit:n}){const a=t,{id:s,title:o,description:u,amount:_}=F(a),p=h=>new URL(Object.assign({"/src/assets/close-icon.svg":V,"/src/assets/logo.svg":U,"/src/assets/scripts/theme.js":R,"/src/assets/trash-icon.svg":O})[`/src/assets/${h}`],self.location).href,y=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),c=A(()=>y.format(_.value)),l=A(()=>_.value<0),r=()=>{n("remove",s.value)};return(h,d)=>(v(),g("div",Ne,[e("div",Be,[e("h4",null,D(z(o)),1),e("p",null,D(z(u)),1)]),e("div",Ve,[e("img",{onClick:r,src:p("trash-icon.svg"),alt:"borrar"},null,8,Ue),e("p",{class:W({red:l.value,green:!l.value})},D(c.value),3)])]))}},Oe=$(Re,[["__scopeId","data-v-f2853bb1"]]);const Fe=t=>(M("data-v-e8c9f386"),t=t(),C(),t),je={class:"movements"},He=Fe(()=>e("h2",{class:"title"},"Historial",-1)),Pe={class:"content"},Ge={__name:"Index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:n}){const a=t,{movements:s}=F(a),o=u=>{n("remove",u)};return(u,_)=>(v(),g("div",je,[He,e("div",Pe,[(v(!0),g(B,null,K(z(s),({id:p,title:y,description:c,amount:l})=>(v(),j(Oe,{key:p,id:p,title:y,description:c,amount:l,onRemove:o},null,8,["id","title","description","amount"]))),128))])]))}},Xe=$(Ge,[["__scopeId","data-v-e8c9f386"]]);const Ee=t=>(M("data-v-9cdc2698"),t=t(),C(),t),Je={class:"modal"},qe={class:"head"},We=Ee(()=>e("p",null,"New movement",-1)),Ke=["src"],Qe={class:"body"},Ye={__name:"Modal",emits:["close"],setup(t,{emit:n}){const a=o=>new URL(Object.assign({"/src/assets/close-icon.svg":V,"/src/assets/logo.svg":U,"/src/assets/scripts/theme.js":R,"/src/assets/trash-icon.svg":O})[`/src/assets/${o}`],self.location).href,s=()=>n("close");return(o,u)=>(v(),g("div",Je,[e("div",qe,[We,e("img",{onClick:s,src:a("close-icon.svg"),alt:"cerrar"},null,8,Ke)]),e("div",Qe,[k(o.$slots,"default",{},void 0,!0)])]))}},Ze=$(Ye,[["__scopeId","data-v-9cdc2698"]]);const L=t=>(M("data-v-efba4ef8"),t=t(),C(),t),et=["onSubmit"],tt={class:"field"},st=L(()=>e("label",null,"Title",-1)),ot={class:"field"},nt=L(()=>e("label",null,"Amount",-1)),at={class:"field"},lt=L(()=>e("label",null,"Description",-1)),ct={class:"field"},ut={class:"radio-label"},rt=L(()=>e("span",null,"Income",-1)),it={class:"radio-label"},_t=L(()=>e("span",null,"Expense",-1)),dt=L(()=>e("div",{class:"action"},[e("button",null,"Add movement")],-1)),vt={__name:"Action",emits:["create"],setup(t,{emit:n}){const a=m(!1),s=m(""),o=m(0),u=m(""),_=m("Ingreso"),p=()=>{a.value=!a.value,n("create",{title:s.value,description:u.value,amount:_.value==="Ingreso"?o.value:-o.value,time:new Date,id:new Date().getTime()}),s.value="",u.value="",o.value=0,_.value="Ingreso"};return(y,c)=>(v(),g(B,null,[e("button",{onClick:c[0]||(c[0]=l=>a.value=!0)},"Add movement"),(v(),j(Y,{to:"#app"},[f(b(Ze,{onClose:c[6]||(c[6]=l=>a.value=!1)},{default:I(()=>[e("form",{onSubmit:Q(p,["prevent"])},[e("div",tt,[st,f(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=l=>s.value=l)},null,512),[[N,s.value]])]),e("div",ot,[nt,f(e("input",{type:"number","onUpdate:modelValue":c[2]||(c[2]=l=>o.value=l)},null,512),[[N,o.value]])]),e("div",at,[lt,f(e("textarea",{rows:"4","onUpdate:modelValue":c[3]||(c[3]=l=>u.value=l)},null,512),[[N,u.value]])]),e("div",ct,[e("label",ut,[f(e("input",{type:"radio","onUpdate:modelValue":c[4]||(c[4]=l=>_.value=l),value:"Ingreso"},null,512),[[P,_.value]]),rt]),e("label",it,[f(e("input",{type:"radio","onUpdate:modelValue":c[5]||(c[5]=l=>_.value=l),value:"Gasto"},null,512),[[P,_.value]]),_t])]),dt],40,et)]),_:1},512),[[T,a.value]])]))],64))}},mt=$(vt,[["__scopeId","data-v-efba4ef8"]]),ht={__name:"Home",setup(t){const n=m(30),a=m(null),s=m(null),o=m([]);Z(()=>{const r=JSON.parse(localStorage.getItem("movements"));if(r===null){o.value=[];return}o.value=r,Array.isArray(o.value)&&(o.value=o.value.map(h=>({...h,time:new Date(h.time)})))});const u=A(()=>{const r=o.value.filter(d=>{const i=new Date;return i.setDate(i.getDate()-n.value),d.time>i}).map(d=>({amount:d.amount,time:d.time}));return r.map((d,i)=>r.slice(0,i+1).reduce((w,x)=>w+x.amount,0))}),_=A(()=>o.value.reduce((r,h)=>r+h.amount,0)),p=r=>{o.value.push(r),l()},y=r=>{o.value=o.value.filter(h=>h.id!==r),console.log(`borrar ${r}`),l()},c=r=>{s.value=r},l=()=>{localStorage.setItem("movements",JSON.stringify(o.value))};return(r,h)=>(v(),j(ue,null,{header:I(()=>[b(ye)]),resume:I(()=>[b(Me,{totalLabel:"Total Savings",label:a.value,totalAmount:_.value,amount:s.value},{graphic:I(()=>[b(ze,{amounts:u.value,onSelect:c},null,8,["amounts"])]),action:I(()=>[b(mt,{onCreate:p})]),_:1},8,["label","totalAmount","amount"])]),movements:I(()=>[b(Xe,{onRemove:y,movements:o.value},null,8,["movements"])]),_:1}))}};export{ht as default};
